name: ktube-media-downloader-test
version: '5'
summary: Download / Play Media from various websites
description: |
  Official Website :-  https://keshavbhatt.github.io/Ktube-media-downloader/index.html
  Ktube media downloader is very powerful tool to download media files from various sites,
  Ktube provide a unique interface which allow you manage your favourite live streems, videos and music from youtube.com
  You can download, play , save videos to your favourite list. Other features are -
  *play youtube
  *download youtube videos
  *download media in different formats, resolutions and qualities
  *download media from other websites
  *Play live streams from youtube
  *save your favourite live streams to your channels list 
  *search youtube
  *filter your search
  *multilingual
  *Show speed , eta , size , progress , time added etc in download item and also saves it
  *have inbuild youtube player (No Flash , support HTML5 video playback)
  *download videos with one click 
  *Multiple downloads
  *full history support 
  *very fast no glitches
  Application allows users to download two links daily for free, to get full access to the application you
  have to upgrade the application to pro.
grade: stable
confinement: strict
icon: snap/gui/icon.png
base: core18

architectures:
  - build-on: amd64
    run-on: amd64

apps:
  ktube-media-downloader:
    command: desktop-launch ktube-media-downloader
    environment:
       QT_STYLE_OVERRIDE: "gtk"
       DISABLE_WAYLAND: 1
       QT_QPA_PLATFORMTHEME: gtk3 
    desktop: usr/share/applications/ktube-media-downloader.desktop
    plugs:
        - home
        - unity7
        - browser-support
        - network
        - network-bind
        - opengl
        - pulseaudio
        - x11
        - alsa
        - desktop
        - network-manager
        - gsettings
        - process-control
        - desktop-legacy
        - wayland
        - mount-observe

plugs:
  gsettings:
  gtk-3-themes:
    interface: content
    target: $SNAP/data-dir/themes
    default-provider: gtk-common-themes
  icon-themes:
    interface: content
    target: $SNAP/data-dir/icons
    default-provider: gtk-common-themes
  sound-themes:
    interface: content
    target: $SNAP/data-dir/sounds
    default-provider: gtk-common-themes
  qt551:
    interface: content
    target: $SNAP/qt551
    default-provider: qt551

parts:
   application:
     source-type: git
     source: https://github.com/keshavbhatt/kt.git
#     source: .
     plugin: qmake
     qt-version: qt5
     override-build: |
          snapcraftctl build
          sed -i 's|Icon=.*|Icon=${SNAP}/meta/gui/icon.png|g' ${SNAPCRAFT_PART_SRC}/ktube-media-downloader.desktop
          cp -rf ${SNAPCRAFT_PART_SRC}/ktube-media-downloader.desktop ${SNAPCRAFT_PART_INSTALL}/usr/share/applications/ktube-media-downloader.desktop
     after: [desktop-qt5]

   snap-launcher:
     plugin: dump
     source: snap_launcher/
   desktop-qt5:
     plugin: nil
     build-packages:
       - build-essential
       - qtbase5-dev
       - dpkg-dev
       - libqt5webkit5-dev
   cleanup:
     after: [application]
     plugin: nil
     override-prime: |
         # Remove unneeded stage files to save space
         cd usr/share
         rm -rf apport bash-completion bug doc doc-base icons lintian man pam-configs pkgconfig themes upstart zsh
